<style lang='less'>
.heat{
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  background: rgb(255, 255, 255);
  z-index: 10000;
}
</style>

<template>
  <div class='heat' id='heatmapChart'>
  </div>
</template>

<script>
import * as d3 from 'd3'
// import axios from 'axios'
import Circos from 'circos'
export default {
  name: 'HeatCircle',
  data () {
    return {
    }
  },
  mounted () {
    let months = [
      { 'len': 31, 'color': 'rgba(0, 0, 0, 0.7)', 'label': 'Jan', 'id': '01' },
      { 'len': 28, 'color': 'rgba(0, 0, 0, 0.7)', 'label': 'Feb', 'id': '02' },
      { 'len': 31, 'color': 'rgba(0, 0, 0, 0.7)', 'label': 'Mar', 'id': '03' },
      { 'len': 30, 'color': 'rgba(0, 0, 0, 0.7)', 'label': 'Apr', 'id': '04' },
      { 'len': 31, 'color': 'rgba(0, 0, 0, 0.7)', 'label': 'May', 'id': '05' },
      { 'len': 30, 'color': 'rgba(0, 0, 0, 0.7)', 'label': 'Jun', 'id': '06' },
      { 'len': 31, 'color': 'rgba(0, 0, 0, 0.7)', 'label': 'Jul', 'id': '07' },
      { 'len': 31, 'color': 'rgba(0, 0, 0, 0.7)', 'label': 'Aug', 'id': '08' },
      { 'len': 30, 'color': 'rgba(0, 0, 0, 0.7)', 'label': 'Sep', 'id': '09' },
      { 'len': 31, 'color': 'rgba(0, 0, 0, 0.7)', 'label': 'Oct', 'id': '10' },
      { 'len': 30, 'color': 'rgba(0, 0, 0, 0.7)', 'label': 'Nov', 'id': '11' },
      { 'len': 31, 'color': 'rgba(0, 0, 0, 0.7)', 'label': 'Dec', 'id': '12' }
    ]
    function drawCircos (months, data) {
      var width = 500
      var circosHeatmap = new Circos({
        container: '#heatmapChart',
        width: width,
        height: width
      })
      circosHeatmap
        .layout(
          months, {
            innerRadius: width / 2 - 20,
            outerRadius: width / 2,
            cornerRadius: 3,
            ticks: {display: false},
            labels: {
              position: 'center',
              display: true,
              size: 12,
              color: '#fff',
              radialOffset: 6
            }
          }
        )
        .heatmap('y2017ssss', data['y2017'], {
          innerRadius: 0.85,
          outerRadius: 0.98,
          logScale: false,
          color: function (datum, index) {
            let color = d3.scaleThreshold().domain([50, 100, 150, 200, 300]).range(['rgb(0, 228, 0)', 'rgb(255, 255, 0)', 'rgb(255, 126, 0)', 'rgb(255, 0, 0)', 'rgb(153, 0, 76)', 'rgb(126, 0, 35)'])
            return color(datum.value)
          },
          events: {
            'mouseover.demo': function (d, i, nodes, event) {
              console.log('electricalConsumption', d, i, nodes, event)
            }
          }
        })
        .heatmap('y2016czxczx', data['y2016'], {
          innerRadius: 0.71,
          outerRadius: 0.84,
          logScale: false,
          color: function (datum, index) {
            let color = d3.scaleThreshold().domain([50, 100, 150, 200, 300]).range(['rgb(0, 228, 0)', 'rgb(255, 255, 0)', 'rgb(255, 126, 0)', 'rgb(255, 0, 0)', 'rgb(153, 0, 76)', 'rgb(126, 0, 35)'])
            return color(datum.value)
          },
          events: {
            'mouseover.demo': function (d, i, nodes, event) {
              console.log('electricalConsumption', d, i, nodes, event)
            }
          }
        })
        .heatmap('y2015czxc', data['y2015'], {
          innerRadius: 0.57,
          outerRadius: 0.70,
          logScale: false,
          color: function (datum, index) {
            let color = d3.scaleThreshold().domain([50, 100, 150, 200, 300]).range(['rgb(0, 228, 0)', 'rgb(255, 255, 0)', 'rgb(255, 126, 0)', 'rgb(255, 0, 0)', 'rgb(153, 0, 76)', 'rgb(126, 0, 35)'])
            return color(datum.value)
          },
          events: {
            'mouseover.demo': function (d, i, nodes, event) {
              console.log('electricalConsumption', d, i, nodes, event)
            }
          }
        })
        .render()
    }
    // axios.get('http: //localhost: 3000/calender').then((data) => {
    let data = {'20150102': 102.8363, '20150103': 127.1196, '20150104': 163.1663, '20150105': 149.5698, '20150106': 93.2118, '20150107': 87.9826, '20150108': 111.521, '20150109': 130.3447, '20150110': 134.8911, '20150111': 119.7027, '20150112': 102.7943, '20150113': 102.5344, '20150114': 116.165, '20150115': 134.8844, '20150116': 126.9853, '20150117': 110.3106, '20150118': 108.8591, '20150119': 104.6513, '20150120': 111.0354, '20150121': 114.1543, '20150122': 117.3694, '20150123': 133.9446, '20150124': 142.3039, '20150125': 149.9058, '20150126': 154.0635, '20150127': 88.9572, '20150128': 61.497, '20150129': 71.8871, '20150130': 80.0094, '20150131': 81.1703, '20150201': 92.3734, '20150202': 110.6212, '20150203': 126.2545, '20150204': 114.2725, '20150205': 93.8297, '20150206': 101.2806, '20150207': 104.165, '20150208': 86.2472, '20150209': 92.0134, '20150210': 108.4188, '20150211': 116.9005, '20150212': 117.982, '20150213': 114.4596, '20150214': 129.2866, '20150215': 124.8464, '20150216': 117.4756, '20150217': 103.5404, '20150218': 94.9272, '20150219': 124.7241, '20150220': 74.654, '20150221': 83.2846, '20150222': 110.4476, '20150223': 80.646, '20150224': 84.6159, '20150225': 79.4309, '20150226': 70.0955, '20150227': 55.6874, '20150228': 56.2118, '20150301': 67.6787, '20150302': 79.6974, '20150303': 82.2452, '20150304': 62.3146, '20150305': 65.6787, '20150306': 78.5812, '20150307': 86.1096, '20150308': 83.1556, '20150309': 76.4609, '20150310': 74.8831, '20150311': 75.9132, '20150312': 85.0955, '20150313': 89.0875, '20150314': 101.2044, '20150315': 106.9399, '20150316': 104.7943, '20150317': 89.6326, '20150318': 72.4061, '20150319': 84.3046, '20150320': 89.2037, '20150321': 85.2104, '20150322': 92.0087, '20150323': 73.998, '20150324': 73.9025, '20150325': 74.6253, '20150326': 77.3988, '20150327': 82.3834, '20150328': 94.3594, '20150329': 109.9292, '20150330': 92.0207, '20150331': 86.2732, '20150401': 73.0795, '20150402': 66.8717, '20150403': 70.8904, '20150404': 73.6673, '20150405': 76.7381, '20150406': 59.654, '20150407': 52.1136, '20150408': 62.0087, '20150409': 68.7943, '20150410': 76.6079, '20150411': 79.189, '20150412': 69.1991, '20150413': 68.4155, '20150414': 80.1116, '20150415': 97.5772, '20150416': 101.7535, '20150417': 97.5331, '20150418': 89.825, '20150419': 66.7889, '20150420': 64.5564, '20150421': 68.5832, '20150422': 71.1062, '20150423': 79.185, '20150424': 81.7669, '20150425': 89.8784, '20150426': 86.9218, '20150427': 83.2338, '20150428': 78.9953, '20150429': 82.7295, '20150430': 90.0615, '20150501': 75.0428, '20150502': 58.6212, '20150503': 72.6687, '20150504': 69.155, '20150505': 79.7682, '20150506': 81.024, '20150507': 81.9793, '20150508': 64.7495, '20150509': 62.8363, '20150510': 68.9719, '20150511': 55.2198, '20150512': 62.4295, '20150513': 72.69, '20150514': 73.652, '20150515': 63.4883, '20150516': 67.8464, '20150517': 77.1029, '20150518': 73.9332, '20150519': 71.6306, '20150520': 63.9826, '20150521': 61.2518, '20150522': 66.5478, '20150523': 72.4609, '20150524': 79.3774, '20150525': 84.5765, '20150526': 86.7261, '20150527': 87.7007, '20150528': 81.9439, '20150529': 66.2712, '20150530': 62.9719, '20150531': 73.7428, '20150601': 78.0595, '20150602': 63.4028, '20150603': 54.0782, '20150604': 56.9566, '20150605': 61.2745, '20150606': 67.5524, '20150607': 59.6353, '20150608': 54.4623, '20150609': 66.9011, '20150610': 70.338, '20150611': 63.0314, '20150612': 64.495, '20150613': 59.5217, '20150614': 58.9833, '20150615': 65.8677, '20150616': 67.1009, '20150617': 66.2665, '20150618': 58.2057, '20150619': 62.9125, '20150620': 58.7208, '20150621': 61.4823, '20150622': 62.8651, '20150623': 64.4222, '20150624': 53.169, '20150625': 51.2512, '20150626': 57.0969, '20150627': 54.7315, '20150628': 56.0648, '20150629': 52.1924, '20150630': 49.1824, '20150701': 51.5337, '20150702': 54.1002, '20150703': 57.2939, '20150704': 56.3821, '20150705': 53.6112, '20150706': 56.1897, '20150707': 60.4215, '20150708': 68.6486, '20150709': 65.9165, '20150710': 59.6132, '20150711': 59.7742, '20150712': 67.1784, '20150713': 74.6192, '20150714': 75.4048, '20150715': 63.7709, '20150716': 57.6847, '20150717': 58.9613, '20150718': 60.1991, '20150719': 59.3567, '20150720': 62.4536, '20150721': 60.8537, '20150722': 58.8417, '20150723': 53.4309, '20150724': 54.3694, '20150725': 57.3226, '20150726': 62.4703, '20150727': 60.5284, '20150728': 55.2839, '20150729': 53.5945, '20150730': 47.7949, '20150731': 47.1677, '20150801': 52.517, '20150802': 53.0554, '20150803': 50.6106, '20150804': 49.6212, '20150805': 55.7629, '20150806': 53.7188, '20150807': 56.9332, '20150808': 53.1409, '20150809': 51.1516, '20150810': 49.5357, '20150811': 53.9225, '20150812': 60.505, '20150813': 65.5872, '20150814': 62.0027, '20150815': 56.2505, '20150816': 66.0501, '20150817': 72, '20150818': 68.0341, '20150819': 55.0281, '20150820': 52.2572, '20150821': 58.682, '20150822': 60.8998, '20150823': 57.6967, '20150824': 55.664, '20150825': 57.0281, '20150826': 64.1436, '20150827': 64.8283, '20150828': 61.9178, '20150829': 57.7609, '20150830': 59.8096, '20150831': 57.2679, '20150901': 55.4529, '20150902': 52.9252, '20150903': 51.4028, '20150904': 51.0013, '20150905': 45.4175, '20150906': 47.4836, '20150907': 51.9372, '20150908': 56.5277, '20150909': 54.3413, '20150910': 52.9613, '20150911': 50.8323, '20150912': 48.0327, '20150913': 54.1269, '20150914': 60.9098, '20150915': 64.5531, '20150916': 67.6199, '20150917': 68.8824, '20150918': 69.3547, '20150919': 68.4342, '20150920': 58.7255, '20150921': 65.6453, '20150922': 61.1964, '20150923': 56.6379, '20150924': 60.513, '20150925': 56.0848, '20150926': 57.8457, '20150927': 61.5364, '20150928': 58.0407, '20150929': 54.986, '20150930': 56.0802, '20151001': 62.7655, '20151002': 69.9673, '20151003': 73.344, '20151004': 73.2906, '20151005': 71.7208, '20151006': 73.9927, '20151007': 62.1376, '20151008': 51.3387, '20151009': 55.823, '20151010': 54.8063, '20151011': 56.9773, '20151012': 69.5992, '20151013': 80.6573, '20151014': 97.6032, '20151015': 101.0454, '20151016': 109.9426, '20151017': 103.7248, '20151018': 84.5564, '20151019': 88.5631, '20151020': 93.6099, '20151021': 88.2351, '20151022': 85.2311, '20151023': 90.7108, '20151024': 87.6473, '20151025': 79.5698, '20151026': 77.841, '20151027': 59.6914, '20151028': 65.9733, '20151029': 63.0281, '20151030': 58.9165, '20151031': 63.151, '20151101': 71.3514, '20151102': 91.1196, '20151103': 102.3019, '20151104': 97.1423, '20151105': 88.7996, '20151106': 66.0127, '20151107': 70.1436, '20151108': 89.0735, '20151109': 93.2665, '20151110': 86.8063, '20151111': 84.4603, '20151112': 86.4329, '20151113': 80.0568, '20151114': 86.2605, '20151115': 85.6907, '20151116': 68.2164, '20151117': 61.2639, '20151118': 57.5631, '20151119': 68.6834, '20151120': 70.6981, '20151121': 65.998, '20151122': 54.9426, '20151123': 49.1182, '20151124': 44.169, '20151125': 55.6019, '20151126': 59.7462, '20151127': 79.5691, '20151128': 100.2452, '20151129': 111.5671, '20151130': 122.4235, '20151201': 107.5865, '20151202': 77.9746, '20151203': 61.6513, '20151204': 61.4596, '20151205': 72.4502, '20151206': 82.8664, '20151207': 106.02, '20151208': 111.3654, '20151209': 112.4055, '20151210': 116.2619, '20151211': 102.0428, '20151212': 98.8283, '20151213': 104.4603, '20151214': 108.0762, '20151215': 85.2652, '20151216': 56.7635, '20151217': 63.4649, '20151218': 82.1216, '20151219': 102.0354, '20151220': 119.2218, '20151221': 150.5651, '20151222': 155.4295, '20151223': 164.3654, '20151224': 129.8103, '20151225': 118.5217, '20151226': 101.7609, '20151227': 83.7956, '20151228': 100.2679, '20151229': 123.3447, '20151230': 129.9486, '20151231': 133.2979, '20160101': 131.147, '20160102': 148.5898, '20160103': 155.7548, '20160104': 134.8323, '20160105': 92.4669, '20160106': 90.8791, '20160107': 87.9586, '20160108': 94.1089, '20160109': 115.8617, '20160110': 117.1536, '20160111': 79.6914, '20160112': 73.5858, '20160113': 83.8898, '20160114': 97.4335, '20160115': 103.4122, '20160116': 109.3126, '20160117': 97.2752, '20160118': 94.4055, '20160119': 97.4122, '20160120': 89.1256, '20160121': 77.5578, '20160122': 68.2632, '20160123': 60.2244, '20160124': 57.9192, '20160125': 67.5304, '20160126': 77.0574, '20160127': 89.2492, '20160128': 96.3006, '20160129': 89.5384, '20160130': 84.6426, '20160131': 72.0394, '20160201': 79.6827, '20160202': 93.9018, '20160203': 102.9693, '20160204': 95.4836, '20160205': 87.5464, '20160206': 73.9312, '20160207': 88.4529, '20160208': 154.5438, '20160209': 98.1536, '20160210': 92.7849, '20160211': 94.521, '20160212': 98.8464, '20160213': 55.8798, '20160214': 43.6466, '20160215': 47.5424, '20160216': 54.2578, '20160217': 65.809, '20160218': 79.2752, '20160219': 97.9586, '20160220': 86.0735, '20160221': 88.3467, '20160222': 88.9472, '20160223': 79.1483, '20160224': 76.3146, '20160225': 84.7255, '20160226': 79.4355, '20160227': 80.2993, '20160228': 82.5538, '20160229': 77.5544, '20160301': 86.1229, '20160302': 104.6172, '20160303': 110.0267, '20160304': 121.1436, '20160305': 129.8183, '20160306': 125.0808, '20160307': 103.5905, '20160308': 66.1844, '20160309': 49.7889, '20160310': 50.6132, '20160311': 67.2505, '20160312': 85.0127, '20160313': 80.4549, '20160314': 88.2445, '20160315': 100.7722, '20160316': 106.0741, '20160317': 112.3647, '20160318': 115.3701, '20160319': 104.9332, '20160320': 91.7642, '20160321': 81.4549, '20160322': 76.6981, '20160323': 61.5698, '20160324': 57.5858, '20160325': 66.7702, '20160326': 72.485, '20160327': 74.0367, '20160328': 81.9933, '20160329': 81.2792, '20160330': 85.674, '20160331': 93.9058, '20160401': 91.4008, '20160402': 87.3226, '20160403': 62.3033, '20160404': 63.0842, '20160405': 67.9479, '20160406': 66.4355, '20160407': 68.0013, '20160408': 76.3574, '20160409': 77.7669, '20160410': 72.2218, '20160411': 72.4295, '20160412': 77.3066, '20160413': 85.2505, '20160414': 80.9178, '20160415': 73.8958, '20160416': 57.1009, '20160417': 57.4997, '20160418': 55.2004, '20160419': 63.9853, '20160420': 63.8791, '20160421': 76.4816, '20160422': 81.8216, '20160423': 70.1035, '20160424': 69.8517, '20160425': 67.8317, '20160426': 63.3861, '20160427': 65.8697, '20160428': 69.6867, '20160429': 80.5544, '20160430': 78.0134, '20160501': 79.2986, '20160502': 68.1977, '20160503': 61.9613, '20160504': 68.1416, '20160505': 72.4202, '20160506': 85.0127, '20160507': 72.1035, '20160508': 56.1303, '20160509': 60.2558, '20160510': 63.2599, '20160511': 82.9405, '20160512': 80.5718, '20160513': 65.4609, '20160514': 63.9613, '20160515': 49.2371, '20160516': 58.3474, '20160517': 66.9065, '20160518': 72.6426, '20160519': 74.4509, '20160520': 67.7181, '20160521': 57.0347, '20160522': 53.2365, '20160523': 59.0174, '20160524': 60.9025, '20160525': 58.9586, '20160526': 57.4549, '20160527': 56.8537, '20160528': 54.9272, '20160529': 58.1857, '20160530': 68.0568, '20160531': 66.4562, '20160601': 53.9185, '20160602': 53.6112, '20160603': 53.6673, '20160604': 55.656, '20160605': 55.8931, '20160606': 61.0648, '20160607': 61.0675, '20160608': 63.346, '20160609': 61.0154, '20160610': 55.4415, '20160611': 51.66, '20160612': 49.523, '20160613': 56.2899, '20160614': 54.678, '20160615': 49.2191, '20160616': 55.8771, '20160617': 58.3166, '20160618': 54.3774, '20160619': 50.2959, '20160620': 50.3327, '20160621': 52.4943, '20160622': 51.2679, '20160623': 46.0748, '20160624': 41.3307, '20160625': 45.9172, '20160626': 51.4482, '20160627': 52.8584, '20160628': 51.8009, '20160629': 51.3721, '20160630': 49.5357, '20160701': 40.1917, '20160702': 46.336, '20160703': 48.3607, '20160704': 49.9345, '20160705': 49.2278, '20160706': 49.684, '20160707': 50.9726, '20160708': 51.3474, '20160709': 51.2164, '20160710': 52.5204, '20160711': 53.996, '20160712': 49.988, '20160713': 47.3908, '20160714': 45.7161, '20160715': 42.4629, '20160716': 47.831, '20160717': 55.2031, '20160718': 56.3654, '20160719': 48.326, '20160720': 42.6313, '20160721': 44.1957, '20160722': 49.3173, '20160723': 53.1556, '20160724': 53.7442, '20160725': 52.6834, '20160726': 51.8938, '20160727': 54.2432, '20160728': 58.177, '20160729': 57.497, '20160730': 58.3754, '20160731': 51.9112, '20160801': 49.1683, '20160802': 47.1443, '20160803': 45.6566, '20160804': 46.4596, '20160805': 47.1443, '20160806': 49.3935, '20160807': 43.5912, '20160808': 43.3868, '20160809': 48.1062, '20160810': 49.0261, '20160811': 48.8764, '20160812': 49.3113, '20160813': 46.843, '20160814': 45.9265, '20160815': 44.2552, '20160816': 48.34, '20160817': 52.9713, '20160818': 51.6981, '20160819': 47.3454, '20160820': 49.5898, '20160821': 53.7909, '20160822': 55.2278, '20160823': 57.8517, '20160824': 62.1804, '20160825': 54.9833, '20160826': 43.6954, '20160827': 45.9606, '20160828': 49.837, '20160829': 54.1443, '20160830': 55.7809, '20160831': 59.4335, '20160901': 52.7963, '20160902': 55.7989, '20160903': 66.0287, '20160904': 67.012, '20160905': 64.3434, '20160906': 58.9733, '20160907': 52.6086, '20160908': 58.6941, '20160909': 61.7214, '20160910': 51.8991, '20160911': 52.1797, '20160912': 56.497, '20160913': 60.8156, '20160914': 64.177, '20160915': 57.2057, '20160916': 54.0421, '20160917': 53.2592, '20160918': 54.1303, '20160919': 49.9011, '20160920': 55.8838, '20160921': 63.7475, '20160922': 68.2158, '20160923': 70.9933, '20160924': 73.7168, '20160925': 72.7709, '20160926': 70.3487, '20160927': 60.9806, '20160928': 44.8363, '20160929': 47.1343, '20160930': 58.1637, '20161001': 65.827, '20161002': 65.9359, '20161003': 65.0989, '20161004': 62.9379, '20161005': 58.7602, '20161006': 60.3861, '20161007': 56.157, '20161008': 49.9265, '20161009': 49.3661, '20161010': 54.6433, '20161011': 57.5852, '20161012': 64.8277, '20161013': 69.6733, '20161014': 66.5919, '20161015': 64.5725, '20161016': 65.181, '20161017': 65.2345, '20161018': 72.9232, '20161019': 77.9325, '20161020': 63.8136, '20161021': 52.9071, '20161022': 45.9412, '20161023': 44.2151, '20161024': 51.4282, '20161025': 58.6887, '20161026': 55.0701, '20161027': 50.5444, '20161028': 45.4041, '20161029': 45.8477, '20161030': 54.7121, '20161031': 49.483, '20161101': 57.0307, '20161102': 71.8691, '20161103': 85.5518, '20161104': 102.2839, '20161105': 111.2612, '20161106': 105.4856, '20161107': 82.4048, '20161108': 57.8744, '20161109': 59.7522, '20161110': 74.0775, '20161111': 76.169, '20161112': 85.3527, '20161113': 102.3607, '20161114': 105.008, '20161115': 92.169, '20161116': 92.4242, '20161117': 100.2912, '20161118': 107.1149, '20161119': 94.513, '20161120': 81.3547, '20161121': 63.6807, '20161122': 41.5084, '20161123': 47.4896, '20161124': 66.3768, '20161125': 84.8798, '20161126': 89.8577, '20161127': 88.6019, '20161128': 89.8437, '20161129': 96.02, '20161130': 94.6299, '20161201': 96.0474, '20161202': 107.0334, '20161203': 117.2839, '20161204': 117.2285, '20161205': 105.8804, '20161206': 100.3454, '20161207': 115.0013, '20161208': 121.986, '20161209': 104.831, '20161210': 99.6319, '20161211': 104.5999, '20161212': 109.9726, '20161213': 90.7655, '20161214': 75.34, '20161215': 89.3607, '20161216': 103.9646, '20161217': 117.5464, '20161218': 139.6232, '20161219': 165.8657, '20161220': 160.4696, '20161221': 117.5411, '20161222': 86.0982, '20161223': 86.9673, '20161224': 91.1476, '20161225': 78.646, '20161226': 60.9352, '20161227': 66.5438, '20161228': 85.0835, '20161229': 96.0561, '20161230': 115.4248, '20161231': 143.3166, '20170102': 154.5992, '20170103': 157.7689, '20170104': 159.342, '20170105': 129.0715, '20170106': 99.4436, '20170107': 92.511, '20170108': 98.3614, '20170109': 87.4061, '20170110': 87.7528, '20170111': 86.3587, '20170112': 83.1483, '20170113': 77.3093, '20170114': 75.3093, '20170115': 78.9739, '20170116': 96.4275, '20170117': 110.8076, '20170118': 116.1309, '20170119': 103.2959, '20170120': 72.5912, '20170121': 79.8277, '20170122': 88.8029, '20170123': 99.7702, '20170124': 109.4629, '20170125': 131.3253, '20170126': 133.336, '20170127': 104.6633, '20170128': 149.7802, '20170129': 98.5144, '20170130': 68.9826, '20170131': 71.0949, '20170201': 75.2028, '20170202': 85.5988, '20170203': 102.4479, '20170204': 113.2067, '20170205': 107.009, '20170206': 86.746, '20170207': 67.4107, '20170208': 62.0966, '20170209': 68.2003, '20170210': 70.2239, '20170211': 79.7997, '20170212': 102.0768, '20170213': 106.1715, '20170214': 116.8464, '20170215': 121.2969, '20170216': 107.4811, '20170217': 86.3244, '20170218': 96.0646, '20170219': 112.8548, '20170220': 85.8202, '20170221': 61.8624, '20170222': 62.8375, '20170223': 67.4485, '20170224': 65.2764, '20170225': 74.4466, '20170226': 79.1337, '20170227': 85.6916, '20170228': 89.0832, '20170301': 77.1907, '20170302': 68.1497, '20170303': 77.8746, '20170304': 91.6801, '20170305': 79.7978, '20170306': 65.8746, '20170307': 67.7492, '20170308': 65.4293, '20170309': 73.1318, '20170310': 79.4299, '20170311': 84.2246, '20170312': 69.2348, '20170313': 49.6225, '20170314': 56.1708, '20170315': 64.1862, '20170316': 70.8829, '20170317': 79.0985, '20170318': 83.8164, '20170319': 80.4012, '20170320': 69.9175, '20170321': 68.5669, '20170322': 66.9968, '20170323': 66.4421, '20170324': 67.9527, '20170325': 66.0921, '20170326': 70.2233, '20170327': 75.3743, '20170328': 77.6014, '20170329': 85.8471, '20170330': 77.7601, '20170331': 63.643, '20170401': 73.2105, '20170402': 75.8061, '20170403': 80.231, '20170404': 77.2169, '20170405': 78.1356, '20170406': 82.1683, '20170407': 79.4511, '20170408': 68.737, '20170409': 47.7933, '20170410': 51.1446, '20170411': 55.826, '20170412': 63.1446, '20170413': 68.0909, '20170414': 72.2847, '20170415': 77.5573, '20170416': 75.5841, '20170417': 77.0627, '20170418': 80.4044, '20170419': 71.9782, '20170420': 65.2783, '20170421': 58.5253, '20170422': 61.3532, '20170423': 62.9456, '20170424': 65.2386, '20170425': 60.7294, '20170426': 51.1823, '20170427': 52.4907, '20170428': 60.8023, '20170429': 71.8663, '20170430': 75.6705, '20170501': 74.2348, '20170502': 67.6884, '20170503': 62.9085, '20170504': 102.0326, '20170505': 122.0339, '20170506': 122.0013, '20170507': 97.4722, '20170508': 68.1913, '20170509': 61.5432, '20170510': 67.0832, '20170511': 71.7991, '20170512': 71.334, '20170513': 63.1024, '20170514': 61.5246, '20170515': 52.8151, '20170516': 53.0614, '20170517': 64.833, '20170518': 71.3672, '20170519': 69.5304, '20170520': 64.524, '20170521': 63.6308, '20170522': 57.4997, '20170523': 44.1638, '20170524': 47.3001, '20170525': 53.2399, '20170526': 61.7518, '20170527': 70.7658, '20170528': 75.5969, '20170529': 72.3551, '20170530': 65.1049, '20170531': 69.2075, '20170601': 62.96, '20170602': 63.2758, '20170603': 56.7508, '20170604': 49.7597, '20170605': 43.6265, '20170606': 42.2681, '20170607': 51.756, '20170608': 56.8124, '20170609': 53.9366, '20170610': 46.6527, '20170611': 49.481, '20170612': 49.4043, '20170613': 48.5868, '20170614': 54.2193, '20170615': 59.6023, '20170616': 60.9797, '20170617': 62.8791, '20170618': 59.3247, '20170619': 53.7589, '20170620': 54.3785, '20170621': 54.6848, '20170622': 47.0994, '20170623': 49.1449, '20170624': 45.8373, '20170625': 48.4297, '20170626': 53.2259, '20170627': 57.0854, '20170628': 57.1677, '20170629': 54.7899, '20170630': 52.2943, '20170701': 51.3652, '20170702': 50.3386, '20170703': 50.4576, '20170704': 49.8759, '20170705': 49.6734, '20170706': 45.5829, '20170707': 42.712, '20170708': 46.3057, '20170709': 44.5177, '20170710': 47.3082, '20170711': 54.7544, '20170712': 54.1918, '20170713': 53.0703, '20170714': 49.8601, '20170715': 44.7025, '20170716': 45.2994, '20170717': 46.1418, '20170718': 46.5209, '20170719': 45.0259, '20170720': 47.9709, '20170721': 43.919, '20170722': 48.6304, '20170723': 53.8171, '20170724': 53.9329, '20170725': 54.4968, '20170726': 55.4373, '20170727': 55.4563, '20170728': 52.9405, '20170729': 51.7703, '20170730': 56.3304, '20170731': 56.0633, '20170801': 49.9639, '20170802': 43.3348, '20170803': 45.993, '20170804': 50.8494, '20170805': 52.0785, '20170806': 52.4418, '20170807': 49.507, '20170808': 43.4032, '20170809': 43.2335, '20170810': 50.0051, '20170811': 52.5658, '20170812': 44.6203, '20170813': 41.4975, '20170814': 42.8741, '20170815': 45.6899, '20170816': 45.8804, '20170817': 45.6063, '20170818': 44.6418, '20170819': 44.5994, '20170820': 46.0595, '20170821': 50.9823, '20170822': 51.1234, '20170823': 40.9203, '20170824': 41.2513, '20170825': 42.4759, '20170826': 40.9639, '20170827': 41.4108, '20170828': 38.4924, '20170829': 36.2057, '20170830': 37.2437, '20170831': 44.0582, '20170901': 50.0658, '20170902': 50.35, '20170903': 48.243, '20170904': 45.8778, '20170905': 46.6395, '20170906': 45.7812, '20170907': 49.1896, '20170908': 53.6195, '20170909': 51.1934, '20170910': 46.2143, '20170911': 43.1334, '20170912': 54.3375, '20170913': 57.0702, '20170914': 54.9716, '20170915': 56.7788, '20170916': 60.3527, '20170917': 61.0297, '20170918': 67.4848, '20170919': 62.366, '20170920': 52.1372, '20170921': 56.2781, '20170922': 57.9027, '20170923': 60.2092, '20170924': 53.4659, '20170925': 50.1477, '20170926': 49.7191, '20170927': 45.7203, '20170928': 46.4375, '20170929': 54.0265, '20170930': 54.6446, '20171001': 53.0605, '20171002': 47.198, '20171003': 38.7327, '20171004': 36.8153, '20171005': 39.9395, '20171006': 48.4174, '20171007': 58.3153, '20171008': 59.7509, '20171009': 48.5019, '20171010': 42.372, '20171011': 37.9861, '20171012': 38.5851, '20171013': 48.1747, '20171014': 50.5528, '20171015': 49.2808, '20171016': 48.6784, '20171017': 48.8116, '20171018': 51.8687, '20171019': 64.9454, '20171020': 72.9447, '20171021': 67.8574, '20171022': 68.4786, '20171023': 65.9253, '20171024': 71.4284, '20171025': 78.8649, '20171026': 86.228, '20171027': 93.7802, '20171028': 84.4001, '20171029': 66.2109, '20171030': 63.1689, '20171031': 76.1795, '20171101': 86.2593, '20171102': 103.4551, '20171103': 86.2875, '20171104': 73.973, '20171105': 82.0006, '20171106': 95.9209, '20171107': 104.8958, '20171108': 90.3785, '20171109': 84.6811, '20171110': 70.4024, '20171111': 58.3409, '20171112': 65.5964, '20171113': 69.2166, '20171114': 65.5279, '20171115': 70.0935, '20171116': 77.6937, '20171117': 71.6146, '20171118': 47.295, '20171119': 58.5543, '20171120': 64.2731, '20171121': 72.9247, '20171122': 62.6874, '20171123': 58.0609, '20171124': 62.3842, '20171125': 71.656, '20171126': 71.2724, '20171127': 80.4281, '20171128': 94.6403, '20171129': 77.5493, '20171130': 56.4068, '20171201': 64.1717, '20171202': 89.7569, '20171203': 92.6034, '20171204': 84.0871, '20171205': 81.6936, '20171206': 93.334, '20171207': 95.8972, '20171208': 69.9825, '20171209': 33.5, '20171210': 80.4358, '20171211': 76.7376, '20171212': 73.1534, '20171213': 74.7245, '20171214': 78.9493, '20171215': 77.9117, '20171216': 65.8754, '20171217': 66.1503, '20171218': 71.0952, '20171219': 70.4571, '20171220': 76.9042, '20171221': 86.7264, '20171222': 107.8622, '20171223': 122.6418, '20171224': 101.6443, '20171225': 85.0839, '20171226': 95.3344, '20171227': 109.7746, '20171228': 124.4771, '20171229': 142.9981, '20171230': 128.0438, '20171231': 122.5304}

    let obj = {}
    for (let item in data) {
      let reg = /^(\d{4})\d+/
      let year = reg.exec(item)[1]
      if (obj['y' + year] === undefined) {
        obj['y' + year] = []
      }
      let end = item[6] + item[7]
      obj['y' + year].push({
        start: parseInt(end) - 1,
        end: parseInt(end),
        block_id: item[4] + item[5],
        value: data[item]
      })
    }
    console.log(months, obj)
    drawCircos(months, obj)
    // })
  }
}
</script>
